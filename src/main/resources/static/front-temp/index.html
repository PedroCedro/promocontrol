<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PromoControl - Operacao</title>
  <link rel="stylesheet" href="/front-temp/styles.css">
</head>
<body>
  <section id="loginView" class="login-view">
    <article class="login-card">
      <h1>Entrar no PromoControl</h1>
      <p>Painel operacional para fornecedores e promotores.</p>
      <div class="grid one">
        <label>Usuario <input id="loginUsername" placeholder="Digite seu usuário" autocomplete="off" /></label>
        <label>Senha <input id="loginPassword" type="password" placeholder="Digite sua senha" autocomplete="off" /></label>
      </div>
      <p id="loginMessage" class="login-message"></p>
      <div class="actions">
        <button id="btnLogin">Entrar</button>
      </div>
      <section id="forceChangeBox" class="force-change-box is-hidden">
        <h2>Troca Obrigatoria de Senha</h2>
        <p>Voce entrou com senha temporaria. Defina uma nova senha para continuar.</p>
        <div class="grid one">
          <label>Nova senha <input id="newPassword" type="password" /></label>
          <label>Confirmar senha <input id="confirmPassword" type="password" /></label>
        </div>
        <div class="actions">
          <button id="btnChangePassword">Alterar Senha e Entrar</button>
        </div>
      </section>
    </article>
  </section>

  <main id="appShell" class="app-shell is-hidden">
    <aside class="side-nav">
      <div class="brand-block">
        <p class="kicker">Homologacao</p>
        <h1>PromoControl</h1>
        <p>Operacao de loja com foco em rastreabilidade.</p>
      </div>
      <section class="profile-card">
        <h2><button id="btnOpenProfile" class="profile-link" type="button">Meu Perfil</button></h2>
        <div class="profile-avatar-wrap">
          <img id="profileAvatarPreview" class="profile-avatar is-hidden" alt="Avatar do usuario" />
          <div id="profileAvatarFallback" class="profile-avatar-fallback">U</div>
        </div>
        <input id="baseUrl" type="hidden" />
        <input id="currentUser" type="hidden" />
        <input id="currentRole" type="hidden" />
        <p id="profileUserName" class="profile-name">user</p>
        <p id="profileRoleName" class="profile-role">OPERATOR</p>
      </section>
      <nav class="tabs">
        <button class="tab-btn is-active" data-tab="tab-dashboard">Painel</button>
        <button class="tab-btn" data-tab="tab-movimentos">Operação</button>
        <button class="tab-btn" data-tab="tab-fornecedores">Fornecedores</button>
        <button class="tab-btn" data-tab="tab-promotores">Promotores</button>
        <button id="tabUsersBtn" class="tab-btn is-hidden" data-tab="tab-usuarios">Usuarios</button>
        <button id="tabIntegracaoBtn" class="tab-btn is-hidden" data-tab="tab-integracao">Logs</button>
      </nav>
      <div class="side-nav-footer">
        <button id="btnLogout">Sair</button>
      </div>
    </aside>

    <section class="workspace">
      <section class="panel-body">
        <section id="tab-perfil" class="tab-panel">
          <article class="card">
            <h2>Ajustes de perfil</h2>
            <div class="grid two">
              <label>Nome completo <input id="profileFullName" placeholder="Seu nome" /></label>
              <label>E-mail <input id="profileEmail" type="email" placeholder="voce@empresa.com" /></label>
              <label>Telefone <input id="profilePhone" placeholder="(11) 99999-9999" /></label>
              <label class="profile-upload">
                Foto do perfil
                <input id="profileAvatarInput" type="file" accept="image/*" />
                <button id="btnRemoveProfileAvatar" class="profile-avatar-remove" type="button">remover foto</button>
              </label>
            </div>
            <div class="actions">
              <button id="btnSaveProfile">Salvar perfil</button>
            </div>
          </article>
        </section>

        <section id="tab-dashboard" class="tab-panel is-active">
          <article class="card">
            <h2>Movimento diario</h2>
            <p class="section-note">Visual em planilha para acompanhamento de entradas e saidas.</p>
            <div class="grid four">
              <label>Data <input id="dashData" type="date" /></label>
              <label>Fornecedor
                <select id="dashFornecedorId"><option value="">Todos</option></select>
              </label>
              <label>Status
                <select id="dashStatus">
                  <option value="">Todos</option>
                  <option value="ATIVO">ATIVO</option>
                  <option value="INATIVO">INATIVO</option>
                  <option value="BLOQUEADO">BLOQUEADO</option>
                </select>
              </label>
              <div class="actions"><button id="btnRefreshDashboard">Atualizar planilha</button></div>
            </div>
            <div class="stats-row">
              <label class="metric">Em loja agora <input id="dashCardEmLoja" readonly /></label>
              <label class="metric">Entradas hoje <input id="dashCardEntradas" readonly /></label>
              <label class="metric">Saidas hoje <input id="dashCardSaidas" readonly /></label>
              <label class="metric">Ajustes hoje <input id="dashCardAjustes" readonly /></label>
            </div>
            <div class="table-wrap">
              <table id="tblDashboardPrincipal">
                <thead>
                  <tr>
                    <th>Promotor</th>
                    <th>Fornecedor</th>
                    <th>Entrada em</th>
                    <th>Usuário Entrada</th>
                    <th>Saida em</th>
                    <th>Usuário Saida</th>
                    <th>Liberação</th>
                    <th>Detalhes</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </article>

        </section>

        <section id="tab-movimentos" class="tab-panel">
          <article class="card">
            <h2>Operação de Entrada e Saída</h2>
            <p class="section-note">Operação rápida para registrar movimentação do promotor.</p>
            <div class="grid two operacao-grid">
              <label>Promotor (somente ATIVO)
                <div class="mov-promotor-find">
                  <input id="mPromotorSearch" list="mPromotoresAtivosList" placeholder="Digite código ou nome do promotor" autocomplete="off" />
                  <button id="btnFindPromotor" type="button">Find</button>
                </div>
                <datalist id="mPromotoresAtivosList"></datalist>
                <input id="mPromotorId" type="hidden" />
              </label>
              <label>Fornecedor
                <input id="mFornecedorNome" readonly />
              </label>
              <label>Liberado por (obrigatorio na saida)
                <input id="mLiberadoPor" placeholder="Nome de quem autorizou" />
              </label>
              <label class="operacao-observacao">Observacao
                <input id="mObservacao" placeholder="Observacao opcional" />
              </label>
            </div>
            <p id="movMessage" class="form-message"></p>
            <div class="actions">
              <button id="btnRegistrarEntrada" class="btn-entry">Entrada</button>
              <button id="btnRegistrarSaida" class="btn-exit">Saida</button>
            </div>
          </article>

          <article class="card">
            <h2>Acompanhamento do Dia</h2>
            <div class="table-wrap">
              <table id="tblOperacaoDia">
                <thead>
                  <tr>
                    <th>Promotor</th>
                    <th>Fornecedor</th>
                    <th>Entrada em</th>
                    <th>Usuário Entrada</th>
                    <th>Saida em</th>
                    <th>Usuário Saída</th>
                    <th>Liberação</th>
                    <th>Detalhes</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </article>
        </section>

        <section id="tab-fornecedores" class="tab-panel">
          <article class="card">
            <h2>Cadastro de Fornecedores</h2>
            <div class="grid three">
              <label>Nome <input id="fNome" placeholder="Digite o nome do fornecedor" /></label>
              <label>Ativo
                <select id="fAtivo">
                  <option value="true">Sim</option>
                  <option value="false">Nao</option>
                </select>
              </label>
              <div class="actions"><button id="btnCriarFornecedor">Cadastrar Fornecedor</button></div>
            </div>
            <p id="fMessage" class="form-message"></p>
          </article>

          <article class="card">
            <h2>Fornecedores Cadastrados</h2>
            <div class="table-wrap">
              <table id="tblFornecedores">
                <thead>
                  <tr><th>Código</th><th>Nome</th><th>Ativo</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </article>
        </section>

        <section id="tab-promotores" class="tab-panel">
          <article class="card card-compact">
            <h2>Novo Promotor</h2>
            <div class="grid four">
              <label>Nome <input id="pNome" placeholder="Digite o nome do promotor" /></label>
              <label>Telefone <input id="pTelefone" placeholder="(11) 99999-9999" /></label>
              <label>Fornecedor
                <div class="mov-promotor-find">
                  <input id="pFornecedorSearch" list="pFornecedoresList" placeholder="Digite código ou nome do fornecedor" autocomplete="off" />
                  <button id="btnFindFornecedor" type="button">Find</button>
                </div>
                <datalist id="pFornecedoresList"></datalist>
                <input id="pFornecedorId" type="hidden" />
              </label>
              <label>Status
                <select id="pStatus">
                  <option>ATIVO</option>
                  <option>INATIVO</option>
                  <option>BLOQUEADO</option>
                </select>
              </label>
            </div>
            <div class="actions"><button id="btnCriarPromotor">Cadastrar Promotor</button></div>
            <p id="pMessage" class="form-message"></p>
          </article>

          <article class="card">
            <h2>Promotores Cadastrados</h2>
            <div class="grid two">
              <label>Filtro por Fornecedor <input id="filtroFornecedorPromotor" placeholder="Digite nome do fornecedor" /></label>
              <div class="actions inline"><button id="btnFiltroPromotor">Filtrar</button></div>
            </div>
            <div class="table-wrap">
              <table id="tblPromotores">
                <thead>
                  <tr><th>Código</th><th>Nome</th><th>Fornecedor</th><th>Status</th><th>Telefone</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </article>
        </section>

        <section id="tab-usuarios" class="tab-panel">
          <details id="adminUsersCard" class="card card-collapsible">
            <summary>Cadastro de Usuarios (Admin)</summary>
            <div class="grid three">
              <label>Usuario <input id="uUsername" placeholder="novo.usuario" /></label>
              <label>Perfil
                <select id="uPerfil">
                  <option value="VIEWER">VIEWER</option>
                  <option value="OPERATOR">OPERATOR</option>
                  <option value="ADMIN">ADMIN</option>
                </select>
              </label>
              <div class="actions"><button id="btnCriarUsuario">Cadastrar Usuario</button></div>
            </div>
            <label>Senha temporaria gerada (visivel uma vez)
              <input id="uTempPassword" readonly placeholder="sera exibida ao cadastrar/resetar" />
            </label>
          </details>

          <details id="adminResetCard" class="card card-collapsible">
            <summary>Resetar Senha de Usuario (Admin)</summary>
            <div class="grid three">
              <label>Usuario <input id="resetUsername" placeholder="viewer, user ou admin" /></label>
              <div class="actions"><button id="btnResetSenha">Resetar Senha</button></div>
              <label>Senha temporaria (visivel uma vez)
                <input id="resetTempPassword" readonly placeholder="sera exibida somente apos reset" />
              </label>
            </div>
          </details>

          <article id="adminUsersListCard" class="card">
            <h2>Usuarios Cadastrados</h2>
            <div class="actions"><button id="btnRefreshUsuarios">Atualizar Usuarios</button></div>
            <div class="table-wrap">
              <table id="tblUsuarios">
                <thead>
                  <tr><th>Usuario</th><th>Perfil</th><th>Troca Senha Pendente</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </article>
        </section>

        <section id="tab-integracao" class="tab-panel">
          <article class="card">
            <h2>Logs de Integracao</h2>
            <pre id="log"></pre>
          </article>
        </section>
      </section>
    </section>
  </main>

  <section id="saidaModal" class="modal-backdrop is-hidden" aria-hidden="true">
    <article class="modal-card">
      <h3>Registrar Saida</h3>
      <p id="saidaModalResumo" class="section-note"></p>
      <input id="saidaModalPromotorId" type="hidden" />
      <div class="grid one">
        <label>Liberado por
          <input id="saidaModalLiberadoPor" placeholder="Nome de quem autorizou" />
        </label>
        <label>Observacao
          <input id="saidaModalObservacao" placeholder="Observacao opcional" />
        </label>
      </div>
      <p id="saidaModalMessage" class="form-message"></p>
      <div class="actions modal-actions">
        <button id="btnCancelarSaidaModal" type="button" class="btn-modal-cancel">Cancelar</button>
        <button id="btnSalvarSaidaModal" type="button" class="btn-modal-save">Salvar</button>
      </div>
    </article>
  </section>

  <script src="/front-temp/app.js"></script>
</body>
</html>
